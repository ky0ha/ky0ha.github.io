<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <title>GitHub代码风格实现</title>
        <link rel="stylesheet" href="./css/brief_introduction.css">
    </head>

    <body>
        <div class="main_items_screen">
            <div class="nav_items">
                <div class="main_items_logo">
                    <a href="./index.html" class="logo"><img src="./image/logo.png" alt="logo" width="66" height="66"></a>
                </div>
                <div class="main_items_nav">
                    <nav>
                        <ul>
                            <li class="home_page"><a href="./index.html" onmousedown="style.color='white';" onmouseup="style.color='black';">主页</a></li>
                            <li class="about_me"><a href="./describe.html" onmousedown="style.color='white';" onmouseup="style.color='black';">简介</a></li>
                            <li class="process_menu"><a href="./download_page.html" onmousedown="style.color='white';" onmouseup="style.color='black';">项目目录</a></li>
                            <li class="friends"><a href="./friends.html" onmousedown="style.color='white';" onmouseup="style.color='black';">好友</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="main_items_login">
                    <a href="./login.html" target="_blank" onmousedown="style.color='white';" onmouseup="style.color='black';">登录</a>
                </div>
            </div>
            
            <div class="icon_and_menu">
                <div class="icon_area_with_nick">
                    <div class="icon">
                        <img src="./image/null-5cf6fe7f63b3f7e4.jpg" alt="头像" width="150" height="150">
                    </div>
                    <div class="nick_name">ky0haの部屋</div>
                    <div class="describe">一个没有动力的咸鱼~</div>
                    <div class="contact">
                        <p><br>qq：253157225</p>
                        <p>邮箱：mitchelltodd434@gmail.com</p>
                        <p>twitter：<a href="https://twitter.com/ky0ha" target="_blank">@ky0ha</a></p>
                        <p>twitch: <a href="https://www.twitch.tv/xysamaw" target="_blank">@xysamaw</a></p>
                        <p>yotube: <a href="https://www.youtube.com/channel/UCQ4pXi3zxS-p0GCU33M38dw" target="_blank">@ha kyo</a></p>
                        <p>bilibili: <a href="https://space.bilibili.com/6865994" target="_blank">@虚叶</a></p>
                        <p>pixiv: <a href="https://www.pixiv.net/users/69347573" target="_blank">@kyoha</a></p>
                    </div>
                </div>

                <div class="menu">
                    <div class="menu_title">
                        <p>项目列表</p>
                    </div>
                    <div class="menu_body">
                        <nav>
                            <ol>
                                <li><a href="./huffman_project.html">哈夫曼编码译码器<br><span>python同时实现编码译码</span></a></li>
                                <li><a href="./multiple_linear_regression.html">基于 pandas 实现回归分析<br><span>使用pandas进行回归学习</span></a></li>
                                <li><a href="./github_style_project.html">纯css实现代码样式<br><span>html+css实现github代码样式</span></a></li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
            
            <div class="main_text">
                <h1>css实现github代码样式</h1>
                <h2>简介</h2>
                <p>在制作这个页面的时候，我突发奇想，如果将代码块放入html的话，要怎么做。去百度之后得到的答案是放在 code 标签内或者放在 pre 标签内，最后我选择的是 pre 标签，但是代码块虽然文本格式是代码的格式，字体大小等很多东西和正常文本是一样的，就会显得很蠢，所以我联想到了 CSDN 以及 GitHub 甚至说 steam 聊天框的 /code指令，这些都同时具有了代码的格式和代码的样式，以及一些深色的背景和缩进，甚至有的还有行号的标注，这看起来实在是太酷了。于是我决定，要在我的这个页面内也实现这种效果。</p>
                <p><br></p>
                <h2>制作深色背景的代码块</h2>
                <p>我采用的是利用 pre 标签承载我的代码块，于是我给 pre 标签赋予了一个 id 并直接在 css 里面对这个 id 进行样式的制作。</p>
                <p>html 中 pre 标签的声明：</p>
                <pre id="code_block">
                    <span>&lt;<code class="tag">pre</code> <code class="attribute">id</code>=<code class="string">"code_block"</code>&gt;代码块内的代码文本&lt;&frasl;<code class="tag">pre</code>&gt;</span>
                </pre>
                <p>对应 css 的创建部分：</p>
                <pre id="code_block">
                    <span><code class="attribute">#code_block</code> {</span>
                        <span>    <code class="attribute">background</code>: <code class="value"><img src="./image/2d2d2d.png">#2d2d2d</code>;</span>
                        <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/201,209,217.png">rgb</code>(<code class="value">201</code>,<code class="value">209</code>,<code class="value">217</code>);</span>
                        <span>    <code class="attribute">font-family</code>: Consolas;</span>
                        <span>    <code class="attribute">text-align</code>: <code class="value">left</code>;</span>
                        <span>    <code class="attribute">padding</code>: <code class="value">1</code><code class="united">em</code>;</span>
                        <span>    <code class="attribute">padding-left</code>: <code class="value">0.8</code><code class="united">em</code>;</span>
                        <span>    <code class="attribute">margin</code>: <code class="value">1</code><code class="united">em</code>;</span>
                        <span>    <code class="attribute">border-radius</code>: <code class="value">5</code><code class="united">px</code>;</span>
                        <span>    <code class="attribute">counter-reset</code>: <code class="value">line</code>;</span>
                        <span>    <code class="attribute">white-space</code>: <code class="value">pre</code>;</span>
                        <span>    <code class="attribute">word-spacing</code>: <code class="value">normal</code>;</span>
                        <span>    <code class="attribute">word-break</code>: <code class="value">normal</code>;</span>
                        <span>    <code class="attribute">word-wrap</code>: <code class="value">normal</code>;</span>
                        <span>    <code class="attribute">line-height</code>: <code class="value">1.5</code>;</span>
                        <span>}</span>
                    </pre>
                <p>关键部分：背景色 background 为 #2d2d2d 深色，color 字体颜色 color 为 rgb(201,209,217) 灰白色，字体为 Consolas 代码字体，<strong>white-space 设置为 normal，取消预文本样式，作用后面介绍 span 的时候会说</strong>，行高 line-height 为 1.5 倍。</p>
                <p>效果如下：</p>
                <pre id="code_block">
                    这是一个代码块
                </pre>
                <p><br></p>
                <h2>实现代码行的行号标注</h2>
                <p>当我实现了上述的代码块样式背景之后，忽然发现，我的代码块，为什么没有他们那个行号标注，这不行，我不能接受！然后我在他们的代码块的html布局里面发现他们的行号是一个叫 ::before 的东西，我去搜索了这个东西具体是什么，怎么使用，然后了解到，实际上就是在标签之前创建一个伪标签，可以对这个标签定义样式和内容，主要用于段前编号等。</p>
                <p>搞清楚了这一点之后，行号的制作实际上就显得很简单了。但是简单归简单，这不是个真正的标签，我不知道怎么将文本写入进去，通过继续学习 ::before 的使用方法，得知是通过 css 里定义一个 content 的属性的值来控制输出，对于输出行号采用的方法是：在存放所有行的容器的 css 里定义一个 counter-reset 属性，值为一个自定义的名称，然后在每一行的 before 里面设置 counter-increment 用于自增长一个对应的标记名称，content:counter(标记名称) 来控制 before 里面显示标记名称的计数值，还可以在后面直接增加字符串，用空格隔开，对 before 显示的内容进行补充和自定义。</p>
                <p>于是代码块的行号标记方法就显得十分简单了：</p>
                <!-- <p>html部分：</p> -->
                <pre id="code_block">
                    <span>&lt;<code class="tag">pre</code> <code class="attribute">id</code>=<code class="string">"code_block"</code>&gt;</span>
                    <span>    &lt;<code class="tag">span</code>&gt;print(1)&lt;&frasl;<code class="tag">span</code>&gt;</span>
                    <span>    &lt;<code class="tag">span</code>&gt;print("hello world")&lt;&frasl;<code class="tag">span</code>&gt;</span>
                    <span>    &lt;<code class="tag">span</code>&gt;print("hello again")&lt;&frasl;<code class="tag">span</code>&gt;</span>
                    <span>&lt;&frasl;<code class="tag">pre</code>&gt;</span>
                </pre>
                <p>注意：<del>因为外围我使用的是 pre 标签，而 pre 标签会将换行和换行之后自动进行的缩进保留下来，会导致代码块得不到想要的效果，所以所有的 span 必须放在同一行进行书写，</del>pre 标签中的 white-space 被设置为 normal，将预文本格式放在 span 标签的 css 内，使 span 带有保留代码格式的预文本，这样的好处是 pre 内的代码块不用再顾忌预格式文本保留空格和换行而必须将所有的 span 写在同一行，使整个 html 的可读性更高，一个 span 代表一个代码行，利用 span 进行计数，利用 css 的块显示实现 span 自动换行。</p>
                <p>以下为对应css的声明部分：</p>
                <pre id="code_block">
                    <span><code class="note">&lt;&#33;&#45;&#45; 在 #code_block 的 css 内，第十行 counter-reset: line; 已经定义了行数标记名称为 line &#45;&#45;&gt;</code></span>
                    <span><code class="attribute">#code_block</code> <code class="tag">span</code> {</span>
                    <span>    <code class="attribute">display</code>: <code class="value">block</code>;</span>
                    <span>    <code class="attribute">line-height</code>: <code class="value">1.5</code><code class="united">rem</code>;</span>
                    <span>    <code class="attribute">white-space</code>: <code class="value">pre</code>;</span>
                    <span>}</span>
                    <span></span>
                    <span><code class="attribute">#code_block</code> <code class="tag">span</code>:<code class="attribute">before</code> {</span>
                    <span>    <code class="attribute">counter-increment</code>: <code class="value">line</code>;</span>
                    <span>    <code class="attribute">content</code>: <code class="default_function_name">counter</code>(<code class="value">line</code>);</span>
                    <span>    <code class="attribute">display</code>: <code class="value">inline-block</code>;</span>
                    <span>    <code class="attribute">width</code>: <code class="value">3</code><code class="united">em</code>;</span>
                    <span>    <code class="attribute">text-align</code>: <code class="value">right</code>;</span>
                    <span>    <code class="attribute">border-right</code>: <code class="value">2</code><code class="united">px</code> <code class="value">solid</code> <code class="value"><img src="./image/999.png">#999</code>;</span>
                    <span>    <code class="attribute">padding-right</code>: <code class="value">.8</code><code class="united">em</code>;</span>
                    <span>    <code class="attribute">margin-right</code>: <code class="value">1</code><code class="united">em</code>;</span>
                    <span>    <code class="attribute">color</code>: <code class="value"><img src="./image/999.png">#999</code>;</span>
                    <span>}</span>
                </pre>
                <blockquote>
                    重点部分：<br>
                    第 4 行，display:block; 将 span 设置为块级元素，实现自动换行效果。<br>
                    第 5 行，white-space: pre; 使存放代码的 span 具有预格式文本效果。 <br>
                    第 9、10 行，counter-increment:line; 和 content:counter(line); 实现行号的自增长和输出，此处必须先自增长在输出，因为行号计数器的起始是 0。<br>
                    第 11 行，通过设置 display 为 inline-block 将 before 和 span 同行。<br>
                    第 12 行，通过设置 width 的值为 3em 保证最大容纳行号为 999，超过 999 行行号所在的 before 将代码内容 span 向后顶，导致 before 的右边框位置改变。<br>
                </blockquote>
                <p>以上步骤实现的结果如下：</p>
                <pre id="code_block">
                    <span>print(1)</span>
                    <span>print("hello world")</span>
                    <span>print("hello again")</span>
                </pre>
                <p>行号很好的实现了，但是总感觉少了什么？？代码只有格式，没有样式！下一步将通过 css 实现代码块样式的控制。</p>
                <p><br></p>
                <h2>利用 code 和 css 实现代码样式效果</h2>
                <p>在选择样式的时候，想了很多选择，最后选择了比较常见而且样式少一些的 GitHub 的样式风格。至于为什么选择样式少的，因为没有使用 js，纯手动实现样式的效果，需要在每个设置样式的地方设置一个 code 进行样式调整，十分的耗时耗力，在下面的实例中就可以看出来了。</p>
                <p>以下为样例 html 的内容：<strong>（ python 中的 print 函数名显示颜色和关键字显示颜色一样，写这一部分记录的时候忽然发现这个事情，但是觉得没必要为了一个 print 专门再加一个 class 的名称，所以样例中直接使用的是 key_word 的 class 名）</strong></p>
                <pre id="code_block">
                    <span>&lt;<code class="tag">pre</code> <code class="attribute">id</code>=<code class="string">"code_block"</code>&gt;</span>
                    <span>    &lt;<code class="tag">span</code>&gt;&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"key_word"</code>&gt;print&lt;&frasl;<code class="tag">code</code>&gt;(&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"value"</code>&gt;1&lt;&frasl;<code class="tag">code</code>&gt;)&lt;&frasl;<code class="tag">span</code>&gt;</span>    
                    <span>    &lt;<code class="tag">span</code>&gt;&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"key_word"</code>&gt;print&lt;&frasl;<code class="tag">code</code>&gt;(&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"string"</code>&gt;"hello world"&lt;&frasl;<code class="tag">code</code>&gt;)&lt;&frasl;<code class="tag">span</code>&gt;</span>    
                    <span>    &lt;<code class="tag">span</code>&gt;&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"key_word"</code>&gt;print&lt;&frasl;<code class="tag">code</code>&gt;(&lt;<code class="tag">code</code> <code class="attribute">class</code>=<code class="string">"string"</code>&gt;"hello again"&lt;&frasl;<code class="tag">code</code>&gt;)&lt;&frasl;<code class="tag">span</code>&gt;</span>    
                    <span>&lt;&frasl;<code class="tag">pre</code>&gt;</span>
                </pre>
                <p>以下为 css 的设置：</p>
                <pre id="code_block">
                    <span><code class="attribute">#code_block .key_word</code>,</span>
                    <span><code class="attribute">#code_block .operator</code>,</span>
                    <span><code class="attribute">#code_block .united</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/255,123,114.png">rgb</code>(<code class="value">255</code>,<code class="value">123</code>,<code class="value">114</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .value</code>,</span>
                    <span><code class="attribute">#code_block .default_function_name</code>,</span>
                    <span><code class="attribute">#code_block .attribute</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/121,192,255.png">rgb</code>(<code class="value">121</code>,<code class="value">192</code>,<code class="value">255</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .note</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/139,148,158.png">rgb</code>(<code class="value">139</code>,<code class="value">148</code>,<code class="value">158</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .created_function_name</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/210,168,255.png">rgb</code>(<code class="value">210</code>,<code class="value">168</code>,<code class="value">255</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .class_name</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/247,162,87.png">rgb</code>(<code class="value">247</code>,<code class="value">162</code>,<code class="value">87</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .string</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/165,214,255.png">rgb</code>(<code class="value">165</code>,<code class="value">214</code>,<code class="value">255</code>);</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .tag</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="value"><img src="./image/7EE787.png">#7EE787</code>;</span>
                    <span>}</span>
                    <span><code class="attribute">#code_block .href_link</code> {</span>
                    <span>    <code class="attribute">color</code>: <code class="default_function_name"><img src="./image/165,214,255.png">rgb</code>(<code class="value">165</code>,<code class="value">214</code>,<code class="value">255</code>);</span>
                    <span>    <code class="attribute">border-bottom</code>: <code class="value">2</code><code class="united">px</code> <code class="value">solid</code> <code class="default_function_name"><img src="./image/165,214,255.png">rgb</code>(<code class="value">165</code>,<code class="value">214</code>,<code class="value">255</code>);</span>
                    <span>}</span>
                </pre>
                <p>以下为样例的实际效果：</p>
                <pre id="code_block">
                    <span><code class="key_word">print</code>(<code class="value">1</code>)</span>
                    <span><code class="key_word">print</code>(<code class="string">"hello world"</code>)</span>
                    <span><code class="key_word">print</code>(<code class="string">"hello again"</code>)</span>
                </pre>
                <p>对于每一个需要特殊显示的内容，都将它放在 code 标签内，标签的 class 为 特殊显示的类型，或者说是要特殊显示的内容的类型，目前我总共定义了的类型有：</p>
                <table class="color_table">
                    <tr>
                        <td class="type">类型</td>
                        <td class="name">定义名称</td>
                        <td class="color_number">色号</td>
                        <td class="color_style0">颜色</td>
                    </tr>
                    <tr>
                        <td class="type">关键字</td>
                        <td class="name">value</td>
                        <td class="color_number">rgb(255,123,144)</td>
                        <td class="color_style1"></td>
                    </tr>
                    <tr>
                        <td class="type">运算符</td>
                        <td class="name">operator</td>
                        <td class="color_number">rgb(255,123,144)</td>
                        <td class="color_style1"></td>
                    </tr>
                    <tr>
                        <td class="type">单位</td>
                        <td class="name">united</td>
                        <td class="color_number">rgb(255,123,144)</td>
                        <td class="color_style1"></td>
                    </tr>
                    <tr>
                        <td class="type">值</td>
                        <td class="name">value</td>
                        <td class="color_number">rgb(121,192,255)</td>
                        <td class="color_style2"></td>
                    </tr>
                    <tr>
                        <td class="type">默认函数</td>
                        <td class="name">default_function_name</td>
                        <td class="color_number">rgb(121,192,255)</td>
                        <td class="color_style2"></td>
                    </tr>
                    <tr>
                        <td class="type">属性</td>
                        <td class="name">attribute</td>
                        <td class="color_number">rgb(121,192,255)</td>
                        <td class="color_style2"></td>
                    </tr>
                    <tr>
                        <td class="type">注释</td>
                        <td class="name">note</td>
                        <td class="color_number">rgb(139,148,158)</td>
                        <td class="color_style3"></td>
                    </tr>
                    <tr>
                        <td class="type">自定义函数</td>
                        <td class="name">created_function_name</td>
                        <td class="color_number">rgb(210,168,255)</td>
                        <td class="color_style4"></td>
                    </tr>
                    <tr>
                        <td class="type">类名</td>
                        <td class="name">class</td>
                        <td class="color_number">rgb(247,162,87)</td>
                        <td class="color_style5"></td>
                    </tr>
                    <tr>
                        <td class="type">字符串</td>
                        <td class="name">string</td>
                        <td class="color_number">rgb(165,214,255)</td>
                        <td class="color_style6"></td>
                    </tr>
                    <tr>
                        <td class="type">标签</td>
                        <td class="name">tag</td>
                        <td class="color_number">#7EE787</td>
                        <td class="color_style7"></td>
                    </tr>
                    <tr>
                        <td class="type">超链接</td>
                        <td class="name">href_link</td>
                        <td class="color_number">rgb(165,214,255)</td>
                        <td class="color_style6"></td>
                    </tr>
                </table>
                <p><br></p>
                <h2>总结</h2>
                <p>对于这个方法来说，最严重的不足就是手动添加导致几乎难以做到几百几千行的大量代码块的书写，改进方法使用 js 应该是可以的，因为不会 js 所以不是很确定，不过还有一个改进方法是我现在就可以做到的，但是还没有去做，就是通过 python 写一个将 python 或者 html 的代码作为文本输入进去，可以输出一个已经格式化好了的对应代码块的 html 代码，这样会省去大量人工添加的时间，而且在 python 上也很容易实现这个算法（但是还没有搞，因为刚刚才想到这个方法，而且急于这周四讲，写好这个 python 再继续写这个网站稍微有点耗时间）。</p>
                <p>如果我真的完成了这个 python 的转换程序的话，也会作为一个有意思的项目，贴在这个个人博客上面~</p>
                <p><br></p>
                <h4>如果你想下载这个项目的css，请点击这里：<a href="./download/GitHub_style.css" download>点击下载</a></h4>
            </div>
        </div>

        <footer class="footers">
            <p>
                Copyright © 2021-2021 <a href="http://ky0ha.github.io" target="_blank">ky0haの部屋 ky0ha.github.io </a> All Rights Reserved. 
            </p>
        </footer>
    </body>
</html>
